<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <title>JS avancé</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <header>
        <h1>JS avancé</h1>
    </header>

    <nav>
        <ul>
            <li><a href="index.html">Accueil</a></li>
        </ul>
    </nav>

    <main>
        <article>
            <div id="animatedElem" style="position:relative;width:100px;height:100px;background-color:#f00;left:500px">
            </div>
        </article>
    </main>

    <footer>
        <p>© 2020 Gaël Meheust - Tous droits réservés.</p>
    </footer>

    <script type="text/javascript">
        const elem = document.getElementById("animatedElem");
        let left = 500;

        let deltaTime = 0;
        let lastTimestamp = 0;

        function start() {
            requestAnimationFrame(step);
        }

        function step(timestamp) {
            deltaTime = timestamp - lastTimestamp;
            lastTimestamp = timestamp;

            elem.style.left = (left -= 10 * deltaTime / 50) + "px";

            if (left > 0) {
                if (deltaTime < 100) {
                    requestAnimationFrame(step);
                }
            }
            else {
                elem.style.left = 0;
            }
        }

        window.addEventListener("load", start);
    </script>

</body>

</html>